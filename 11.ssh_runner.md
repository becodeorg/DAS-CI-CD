# SSH runner vers target

  * créer une paire de clefs
  
  * créer un user (avec les droits souhaités)
  
  * ajouter la clef publique sur le serveur cible


Création d'une paire de clés (publiqte et privée) 

```bash
ssh-keygen -t ecdsa -b 521
```

Connecton-nous en ssh sur la vm runner-2   
Et créons un utilisateur gitlab

```bash
sudo adduser gitlab
sudo usermod -aG sudo gitlab
sudo su - gitlab
```
Ensuite créons le dossier .ssh 
```bash
mkdir .sh
```
et ensuite on rajoute la clé publique précédement créé dans le fichier ``authorized__keys``

```bash
echo "ecdsa-sha2-nistp521 AAAAE2VjZHNhLXNoYTItbmlzdHA1MjEAAAAIbmlzdHA1MjEAAACFBACb59WLcHEVoT2whP1FAP4xPKSqCVQe3aBboj2e2Y/fCXEagxpLfniki2+ID+KhsI6y1owPdhANzW+odKmiUPyDkADqZes3ssTH79FVrl8g8SwpjMqEjFkfh4OUKKXJKJhTUDYxcnYd/YplaqF7yK85sm+PbjbxkBNAY/vZ33rUsL/9uQ== azureuser@gitlab-1" > ~/.ssh/authorized_keys
```





