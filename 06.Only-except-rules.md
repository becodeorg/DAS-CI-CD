# Contrôle d'exécution avec only, excepts & rules

Documentation GitLab : [only, excepts & rules](https://docs.gitlab.com/ee/ci/yaml/#only--except)

Les mots-clés only, except et rules sont utilisés pour contrôler l'exécution des jobs.

- only : Indique quand un job doit être lancé.
- except : Indique quand un job NE DOIT PAS être lancé.
- rules : Est le mot-clé pour contrôler quand ajouter des jobs aux pipelines.

```yaml
job1:
    script:
      - echo "Ce job sera exécuté uniquement si les conditions définies dans only sont remplies"
    only:
      - main
job2:
  script:
    - echo "Ce job ne sera pas exécuté si les conditions définies dans except sont remplies"
  except:
    - schedules

job3:
  script:
    - echo "Ceci est une utilisation recommandée avec rules"
  rules:
    - changes:
        - "*.js"
```

Ici le job3 ne sera executé que s'il y a un fichier *.js qui est  modifié/ajouté.


## Avec des variables
```yaml
stages:
    - build
build:
    stage: build
    tags:
        - shell
    script:
        - echo "Ce script ne s'éxécute que si les deux veraibles corresepondent."
    only:
        variables:
            - $VAR1 == "stagging" && $VAR2 == "test"
```  
